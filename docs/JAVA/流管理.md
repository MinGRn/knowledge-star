# 流管理

## 读取磁盘文件输入流

```java
//  import java.io.*;

public static void readFile(String[] args){
    // 获取文件
    String filePath = "/home/README.md";
    File file = new File(filePath);
    // 借助 BufferedInputStream() 起到缓冲作用
    try(InputStream inputStream = new BufferedInputStream(new FileInputStream(file));
        BufferedReader br = new BufferedReader(new InputStreamReader(inputStream,"UTF-8"))){
    
        String line;
        StringBuilder sb = new StringBuilder();
        while((line = br.readLine()) != null){
            sb.append(line);
        }

	// stream handler ...
    } catch(IOException e){
        // IOException handler ...
    }
}

```

## 输出（动态追加）文件

```java
//  import java.io.*;
public static void writeFile(String[] args) {

    String outputFilePath = "/home/README.md";
    try (FileOutputStream fileOutputStream = new FileOutputStream(outputfilePath, true);
        BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(fileOutputStream)) {
        
        // 使用 str 字符串代替多文本文件
        String str = "str ...";
        bufferedOutputStream.write(sql.getBytes("UTF-8"), 0, str.getBytes().length);
        bufferedOutputStream.write(str.getBytes("UTF-8"));
    } catch (IOException e) {
        // IOException handler ...
    }
}
```

> **说明：** 在 try-catch-resource 语句中使用 `new FileOutputStream(String name, boolean append)` 构造函数实现文件动态追加功能。源码如下：

```java
    /**
     * Creates a file output stream to write to the file with the specified
     * name.  If the second argument is <code>true</code>, then
     * bytes will be written to the end of the file rather than the beginning.
     * A new <code>FileDescriptor</code> object is created to represent this
     * file connection.
     * <p>
     * First, if there is a security manager, its <code>checkWrite</code>
     * method is called with <code>name</code> as its argument.
     * <p>
     * If the file exists but is a directory rather than a regular file, does
     * not exist but cannot be created, or cannot be opened for any other
     * reason then a <code>FileNotFoundException</code> is thrown.
     *
     * @param     name        the system-dependent file name
     * @param     append      if <code>true</code>, then bytes will be written
     *                   to the end of the file rather than the beginning
     * @exception  FileNotFoundException  if the file exists but is a directory
     *                   rather than a regular file, does not exist but cannot
     *                   be created, or cannot be opened for any other reason.
     * @exception  SecurityException  if a security manager exists and its
     *               <code>checkWrite</code> method denies write access
     *               to the file.
     * @see        java.lang.SecurityManager#checkWrite(java.lang.String)
     * @since     JDK1.1
     */
    public FileOutputStream(String name, boolean append) throws FileNotFoundException {
        this(name != null ? new File(name) : null, append);
    }
```

